      <!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SohbetX (Render)</title>

    <style>
        body { font-family: Arial; padding: 20px; }
        #chatBox { width: 100%; height: 60vh; border: 1px solid #ccc; overflow-y: auto; padding: 10px; }
        #messageInput { width: 80%; padding: 10px; }
        #sendBtn { padding: 10px; }
    </style>
</head>
<body>

<h2>SohbetX (Render)</h2>

<label>Kullanıcı adın:</label>
<input id="username" placeholder="Genel"><br><br>

<label>Oda ID:</label>
<input id="roomId" placeholder="örn: genel"><br><br>

<button id="joinBtn">Odaya Gir</button>

<hr>

<div id="chatBox"></div>

<br>

<input id="messageInput" placeholder="Mesaj yaz...">
<button id="sendBtn">Gönder</button>

<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

<script>
    const socket = io(); // Render’da otomatik doğru URL’i alır

    const username = document.getElementById("username");
    const roomId = document.getElementById("roomId");
    const joinBtn = document.getElementById("joinBtn");
    const chatBox = document.getElementById("chatBox");
    const messageInput = document.getElementById("messageInput");
    const sendBtn = document.getElementById("sendBtn");

    let currentRoom = null;

    joinBtn.onclick = () => {
        if (!roomId.value.trim()) {
            alert("Oda ID boş olamaz!");
            return;
        }
        currentRoom = roomId.value.trim();

        socket.emit("joinRoom", currentRoom);

        chatBox.innerHTML += `<div style="color:green;">Odaya giriş yapıldı: ${currentRoom}</div>`;
    };

    sendBtn.onclick = () => {
        if (!currentRoom) {
            alert("Önce odaya gir!");
            return;
        }

        const msg = messageInput.value.trim();
        if (msg === "") return;

        socket.emit("sendMessage", {
            roomId: currentRoom,
            from: username.value || "Anonim",
            text: msg
        });

        messageInput.value = "";
    };

    socket.on("receiveMessage", (data) => {
        chatBox.innerHTML += `
            <div><b>${data.from}:</b> ${data.text}</div>
        `;
        chatBox.scrollTop = chatBox.scrollHeight;
    });
</script>

</body>
</html>  
